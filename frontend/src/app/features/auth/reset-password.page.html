<section class="auth-card">
  <h1>Reset Password</h1>

  <div *ngIf="status() === 'missing'" class="error">
    <p>The reset link is missing a token. Start the reset process again to receive a valid email.</p>
  </div>

  <form *ngIf="status() === 'ready' || status() === 'submitting'" [formGroup]="form" (ngSubmit)="submit()">
    <label>
      New password
      <input type="password" formControlName="password" placeholder="Enter a new password" [disabled]="status() === 'submitting'" />
    </label>
    <label>
      Confirm password
      <input type="password" formControlName="confirm" placeholder="Re-enter the password" [disabled]="status() === 'submitting'" />
    </label>
    <p *ngIf="formErrors()" class="error">{{ formErrors() }}</p>
    <button type="submit" [disabled]="status() === 'submitting'">{{ status() === 'submitting' ? 'Resettingâ€¦' : 'Reset Password' }}</button>
  </form>

  <div *ngIf="status() === 'success'" class="success">
    <p>Your password was updated. You can sign in with your new credentials.</p>
    <a routerLink="/dashboard" class="btn">Return to Dashboard</a>
  </div>

  <div *ngIf="status() === 'error'" class="error">
    <p>{{ errorMessage() }}</p>
    <button type="button" (click)="retry()">Try Again</button>
  </div>
</section>
